<div class="w-full organization-chart-top">
  <p-organizationChart [value]="chartData" [collapsible]="true" styleClass="w-full" [selectionMode]="'multiple'">
    <ng-template let-node pTemplate="person">
      <div class="flex flex-col items-center">
        <ng-container *ngIf="!node.data.editing">
          <span class="font-bold mb-1">{{ node.label }}</span>
          <span class="text-xs text-gray-500">{{ node.data.role }}</span>
          <button pButton type="button" icon="pi pi-pencil" class="p-button-text p-button-sm mt-1" (click)="startEdit(node)"></button>
        </ng-container>
        <ng-container *ngIf="node.data.editing">
          <input pInputText [(ngModel)]="node.data.name" [ngModelOptions]="{standalone:true}" placeholder="姓名" class="mb-1" />
          <input pInputText [(ngModel)]="node.data.role" [ngModelOptions]="{standalone:true}" placeholder="角色" class="mb-1" />
          <div class="flex gap-2 mt-1">
            <button pButton type="button" label="儲存" icon="pi pi-check" class="p-button-sm" (click)="saveEdit(node)"></button>
            <button pButton type="button" label="取消" icon="pi pi-times" class="p-button-text p-button-sm" (click)="cancelEdit(node)"></button>
          </div>
        </ng-container>
      </div>
    </ng-template>
  </p-organizationChart>
</div>
